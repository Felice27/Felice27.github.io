---
layout: post
title: 08/15/22
use_math: true
category: journal
---


# Peculiarity of 10eV Sim (Cont)

Last week I tried to understand why exactly the 10eV simulations did not seem to increase heating as we increased the cell size. I decided to run some sims with 100eV for higher grid spacings: ${12, 15, 18, 25}$ nm.

![image](https://user-images.githubusercontent.com/98538788/184934724-e05e83c1-4288-4354-ad44-70c1467fbc16.png)

From these results, it is clear that somewhere around 10nm, this relationship breaks down. For the 10eV sims from last week, it broke down around 3nm. If I were to guess, this relationship would breakdown for 1000eV around $\sqrt{10} * 10 \approx 31$ nm and for 10000eV around $100 nm$. 

Here, is a plot with 1000eV

![image](https://user-images.githubusercontent.com/98538788/184948883-86087cf5-d7a1-4a58-89e4-c821fdaf2fd2.png)

In this plot, we start seeing the slope peak and stay constant around 25 nm. This tells me that 

# Download of Pytorch

Currently, Pytorch only supports python 3.7-3.9. By default, python 3.9 is not available on OSC, but Tom has it downloaded. So, we can use

> source /fs/project/PAS1066/zhang_anaconda/anaconda3/bin/activate

to activate conda that has python 3.9 available.

## Conda Environment

> conda env list

This will list the already created conda environments. To remove an environment, type: 

> conda env remove -n *env-name*

To create a new environment (let's call it *pytorch-env*):

> conda create -n pytorch-env python=3.9
> 
> conda activate pytorch-env

Then, we can install some supporting packages

> conda install h5py imageio jupyter matplotlib numpy tqdm

Then, we should follow instruction on https://pytorch.org/get-started/locally/ to download pytorch. If just trying to run on CPU, should download using the 'cpuonly' flag. When downloading on OSC or Unity (or anywhere with CUDA Availability), we should check the CUDA version. to do this, we can type

> ls /usr/local/cuda

which should list all available versions of CUDA. At the moment, OSC doesn't seem to have CUDA 11.3, so it looks like I should use CUDA 10.2. From the pytorch website, I would download this using

> conda install pytorch torchvision torchaudio cudatoolkit=10.2 -c pytorch

To test if CUDA is installed correctly, we can type: 

> python()
> 
> import torch
> 
> torch.cuda.is_available()

This should return true, however on OSC and Unity, we must specifically specify the GPU through a batch script or interactive session in order to return true. Ricky [has a page on LASERDOCS](https://u.osu.edu/laserdocs/sample-page/using-gpu-on-osc/) showing how to get the GPU stuff working on OSC and a sample batch script to run a test file. 







